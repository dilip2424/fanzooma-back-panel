{"ast":null,"code":"import { Directive, ElementRef, EventEmitter, Inject, Input, Output, PLATFORM_ID, NgZone } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport * as ɵngcc0 from '@angular/core';\n\nvar ClickOutsideDirective = function () {\n  function ClickOutsideDirective(_el, _ngZone, platformId) {\n    this._el = _el;\n    this._ngZone = _ngZone;\n    this.platformId = platformId;\n    this.clickOutsideEnabled = true;\n    this.attachOutsideOnClick = false;\n    this.delayClickOutsideInit = false;\n    this.emitOnBlur = false;\n    this.exclude = '';\n    this.excludeBeforeClick = false;\n    this.clickOutsideEvents = '';\n    this.clickOutside = new EventEmitter();\n    this._nodesExcluded = [];\n    this._events = ['click'];\n    this._initOnClickBody = this._initOnClickBody.bind(this);\n    this._onClickBody = this._onClickBody.bind(this);\n    this._onWindowBlur = this._onWindowBlur.bind(this);\n  }\n\n  ClickOutsideDirective.prototype.ngOnInit = function () {\n    if (!isPlatformBrowser(this.platformId)) {\n      return;\n    }\n\n    this._init();\n  };\n\n  ClickOutsideDirective.prototype.ngOnDestroy = function () {\n    if (!isPlatformBrowser(this.platformId)) {\n      return;\n    }\n\n    this._removeClickOutsideListener();\n\n    this._removeAttachOutsideOnClickListener();\n\n    this._removeWindowBlurListener();\n  };\n\n  ClickOutsideDirective.prototype.ngOnChanges = function (changes) {\n    if (!isPlatformBrowser(this.platformId)) {\n      return;\n    }\n\n    if (changes['attachOutsideOnClick'] || changes['exclude'] || changes['emitOnBlur']) {\n      this._init();\n    }\n  };\n\n  ClickOutsideDirective.prototype._init = function () {\n    if (this.clickOutsideEvents !== '') {\n      this._events = this.clickOutsideEvents.split(',').map(function (e) {\n        return e.trim();\n      });\n    }\n\n    this._excludeCheck();\n\n    if (this.attachOutsideOnClick) {\n      this._initAttachOutsideOnClickListener();\n    } else {\n      this._initOnClickBody();\n    }\n\n    if (this.emitOnBlur) {\n      this._initWindowBlurListener();\n    }\n  };\n\n  ClickOutsideDirective.prototype._initOnClickBody = function () {\n    if (this.delayClickOutsideInit) {\n      setTimeout(this._initClickOutsideListener.bind(this));\n    } else {\n      this._initClickOutsideListener();\n    }\n  };\n\n  ClickOutsideDirective.prototype._excludeCheck = function () {\n    if (this.exclude) {\n      try {\n        var nodes = Array.from(document.querySelectorAll(this.exclude));\n\n        if (nodes) {\n          this._nodesExcluded = nodes;\n        }\n      } catch (err) {\n        console.error('[ng-click-outside] Check your exclude selector syntax.', err);\n      }\n    }\n  };\n\n  ClickOutsideDirective.prototype._onClickBody = function (ev) {\n    if (!this.clickOutsideEnabled) {\n      return;\n    }\n\n    if (this.excludeBeforeClick) {\n      this._excludeCheck();\n    }\n\n    if (!this._el.nativeElement.contains(ev.target) && !this._shouldExclude(ev.target)) {\n      this._emit(ev);\n\n      if (this.attachOutsideOnClick) {\n        this._removeClickOutsideListener();\n      }\n    }\n  };\n\n  ClickOutsideDirective.prototype._onWindowBlur = function (ev) {\n    var _this = this;\n\n    setTimeout(function () {\n      if (!document.hidden) {\n        _this._emit(ev);\n      }\n    });\n  };\n\n  ClickOutsideDirective.prototype._emit = function (ev) {\n    var _this = this;\n\n    if (!this.clickOutsideEnabled) {\n      return;\n    }\n\n    this._ngZone.run(function () {\n      return _this.clickOutside.emit(ev);\n    });\n  };\n\n  ClickOutsideDirective.prototype._shouldExclude = function (target) {\n    for (var _i = 0, _a = this._nodesExcluded; _i < _a.length; _i++) {\n      var excludedNode = _a[_i];\n\n      if (excludedNode.contains(target)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  ClickOutsideDirective.prototype._initClickOutsideListener = function () {\n    var _this = this;\n\n    this._ngZone.runOutsideAngular(function () {\n      _this._events.forEach(function (e) {\n        return document.addEventListener(e, _this._onClickBody);\n      });\n    });\n  };\n\n  ClickOutsideDirective.prototype._removeClickOutsideListener = function () {\n    var _this = this;\n\n    this._ngZone.runOutsideAngular(function () {\n      _this._events.forEach(function (e) {\n        return document.removeEventListener(e, _this._onClickBody);\n      });\n    });\n  };\n\n  ClickOutsideDirective.prototype._initAttachOutsideOnClickListener = function () {\n    var _this = this;\n\n    this._ngZone.runOutsideAngular(function () {\n      _this._events.forEach(function (e) {\n        return _this._el.nativeElement.addEventListener(e, _this._initOnClickBody);\n      });\n    });\n  };\n\n  ClickOutsideDirective.prototype._removeAttachOutsideOnClickListener = function () {\n    var _this = this;\n\n    this._ngZone.runOutsideAngular(function () {\n      _this._events.forEach(function (e) {\n        return _this._el.nativeElement.removeEventListener(e, _this._initOnClickBody);\n      });\n    });\n  };\n\n  ClickOutsideDirective.prototype._initWindowBlurListener = function () {\n    var _this = this;\n\n    this._ngZone.runOutsideAngular(function () {\n      window.addEventListener('blur', _this._onWindowBlur);\n    });\n  };\n\n  ClickOutsideDirective.prototype._removeWindowBlurListener = function () {\n    var _this = this;\n\n    this._ngZone.runOutsideAngular(function () {\n      window.removeEventListener('blur', _this._onWindowBlur);\n    });\n  };\n\n  ClickOutsideDirective.ctorParameters = function () {\n    return [{\n      type: ElementRef\n    }, {\n      type: NgZone\n    }, {\n      type: Object,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }];\n  };\n\n  ClickOutsideDirective.propDecorators = {\n    clickOutsideEnabled: [{\n      type: Input\n    }],\n    attachOutsideOnClick: [{\n      type: Input\n    }],\n    delayClickOutsideInit: [{\n      type: Input\n    }],\n    emitOnBlur: [{\n      type: Input\n    }],\n    exclude: [{\n      type: Input\n    }],\n    excludeBeforeClick: [{\n      type: Input\n    }],\n    clickOutsideEvents: [{\n      type: Input\n    }],\n    clickOutside: [{\n      type: Output\n    }]\n  };\n\n  ClickOutsideDirective.ɵfac = function ClickOutsideDirective_Factory(t) {\n    return new (t || ClickOutsideDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(PLATFORM_ID));\n  };\n\n  ClickOutsideDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: ClickOutsideDirective,\n    selectors: [[\"\", \"clickOutside\", \"\"]],\n    inputs: {\n      clickOutsideEnabled: \"clickOutsideEnabled\",\n      attachOutsideOnClick: \"attachOutsideOnClick\",\n      delayClickOutsideInit: \"delayClickOutsideInit\",\n      emitOnBlur: \"emitOnBlur\",\n      exclude: \"exclude\",\n      excludeBeforeClick: \"excludeBeforeClick\",\n      clickOutsideEvents: \"clickOutsideEvents\"\n    },\n    outputs: {\n      clickOutside: \"clickOutside\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature]\n  });\n\n  (function () {\n    (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n  })();\n\n  return ClickOutsideDirective;\n}();\n\nexport { ClickOutsideDirective }; //# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xpY2stb3V0c2lkZS5kaXJlY3RpdmUuanMiLCJzb3VyY2VzIjpbImNsaWNrLW91dHNpZGUuZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFHTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBTTtBQUNOO0FBQ0E7QUFDQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpcmVjdGl2ZSwgRWxlbWVudFJlZiwgRXZlbnRFbWl0dGVyLCBJbmplY3QsIElucHV0LCBPdXRwdXQsIFBMQVRGT1JNX0lELCBOZ1pvbmUsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBpc1BsYXRmb3JtQnJvd3NlciB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG52YXIgQ2xpY2tPdXRzaWRlRGlyZWN0aXZlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDbGlja091dHNpZGVEaXJlY3RpdmUoX2VsLCBfbmdab25lLCBwbGF0Zm9ybUlkKSB7XG4gICAgICAgIHRoaXMuX2VsID0gX2VsO1xuICAgICAgICB0aGlzLl9uZ1pvbmUgPSBfbmdab25lO1xuICAgICAgICB0aGlzLnBsYXRmb3JtSWQgPSBwbGF0Zm9ybUlkO1xuICAgICAgICB0aGlzLmNsaWNrT3V0c2lkZUVuYWJsZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmF0dGFjaE91dHNpZGVPbkNsaWNrID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZGVsYXlDbGlja091dHNpZGVJbml0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZW1pdE9uQmx1ciA9IGZhbHNlO1xuICAgICAgICB0aGlzLmV4Y2x1ZGUgPSAnJztcbiAgICAgICAgdGhpcy5leGNsdWRlQmVmb3JlQ2xpY2sgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jbGlja091dHNpZGVFdmVudHMgPSAnJztcbiAgICAgICAgdGhpcy5jbGlja091dHNpZGUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuX25vZGVzRXhjbHVkZWQgPSBbXTtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gWydjbGljayddO1xuICAgICAgICB0aGlzLl9pbml0T25DbGlja0JvZHkgPSB0aGlzLl9pbml0T25DbGlja0JvZHkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5fb25DbGlja0JvZHkgPSB0aGlzLl9vbkNsaWNrQm9keS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9vbldpbmRvd0JsdXIgPSB0aGlzLl9vbldpbmRvd0JsdXIuYmluZCh0aGlzKTtcbiAgICB9XG4gICAgQ2xpY2tPdXRzaWRlRGlyZWN0aXZlLnByb3RvdHlwZS5uZ09uSW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFpc1BsYXRmb3JtQnJvd3Nlcih0aGlzLnBsYXRmb3JtSWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faW5pdCgpO1xuICAgIH07XG4gICAgQ2xpY2tPdXRzaWRlRGlyZWN0aXZlLnByb3RvdHlwZS5uZ09uRGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFpc1BsYXRmb3JtQnJvd3Nlcih0aGlzLnBsYXRmb3JtSWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVtb3ZlQ2xpY2tPdXRzaWRlTGlzdGVuZXIoKTtcbiAgICAgICAgdGhpcy5fcmVtb3ZlQXR0YWNoT3V0c2lkZU9uQ2xpY2tMaXN0ZW5lcigpO1xuICAgICAgICB0aGlzLl9yZW1vdmVXaW5kb3dCbHVyTGlzdGVuZXIoKTtcbiAgICB9O1xuICAgIENsaWNrT3V0c2lkZURpcmVjdGl2ZS5wcm90b3R5cGUubmdPbkNoYW5nZXMgPSBmdW5jdGlvbiAoY2hhbmdlcykge1xuICAgICAgICBpZiAoIWlzUGxhdGZvcm1Ccm93c2VyKHRoaXMucGxhdGZvcm1JZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhbmdlc1snYXR0YWNoT3V0c2lkZU9uQ2xpY2snXSB8fCBjaGFuZ2VzWydleGNsdWRlJ10gfHwgY2hhbmdlc1snZW1pdE9uQmx1ciddKSB7XG4gICAgICAgICAgICB0aGlzLl9pbml0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENsaWNrT3V0c2lkZURpcmVjdGl2ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsaWNrT3V0c2lkZUV2ZW50cyAhPT0gJycpIHtcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IHRoaXMuY2xpY2tPdXRzaWRlRXZlbnRzLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uIChlKSB7IHJldHVybiBlLnRyaW0oKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZXhjbHVkZUNoZWNrKCk7XG4gICAgICAgIGlmICh0aGlzLmF0dGFjaE91dHNpZGVPbkNsaWNrKSB7XG4gICAgICAgICAgICB0aGlzLl9pbml0QXR0YWNoT3V0c2lkZU9uQ2xpY2tMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faW5pdE9uQ2xpY2tCb2R5KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZW1pdE9uQmx1cikge1xuICAgICAgICAgICAgdGhpcy5faW5pdFdpbmRvd0JsdXJMaXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDbGlja091dHNpZGVEaXJlY3RpdmUucHJvdG90eXBlLl9pbml0T25DbGlja0JvZHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmRlbGF5Q2xpY2tPdXRzaWRlSW5pdCkge1xuICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLl9pbml0Q2xpY2tPdXRzaWRlTGlzdGVuZXIuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9pbml0Q2xpY2tPdXRzaWRlTGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ2xpY2tPdXRzaWRlRGlyZWN0aXZlLnByb3RvdHlwZS5fZXhjbHVkZUNoZWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5leGNsdWRlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBub2RlcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLmV4Y2x1ZGUpKTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbm9kZXNFeGNsdWRlZCA9IG5vZGVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbbmctY2xpY2stb3V0c2lkZV0gQ2hlY2sgeW91ciBleGNsdWRlIHNlbGVjdG9yIHN5bnRheC4nLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBDbGlja091dHNpZGVEaXJlY3RpdmUucHJvdG90eXBlLl9vbkNsaWNrQm9keSA9IGZ1bmN0aW9uIChldikge1xuICAgICAgICBpZiAoIXRoaXMuY2xpY2tPdXRzaWRlRW5hYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVCZWZvcmVDbGljaykge1xuICAgICAgICAgICAgdGhpcy5fZXhjbHVkZUNoZWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9lbC5uYXRpdmVFbGVtZW50LmNvbnRhaW5zKGV2LnRhcmdldCkgJiYgIXRoaXMuX3Nob3VsZEV4Y2x1ZGUoZXYudGFyZ2V0KSkge1xuICAgICAgICAgICAgdGhpcy5fZW1pdChldik7XG4gICAgICAgICAgICBpZiAodGhpcy5hdHRhY2hPdXRzaWRlT25DbGljaykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlbW92ZUNsaWNrT3V0c2lkZUxpc3RlbmVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENsaWNrT3V0c2lkZURpcmVjdGl2ZS5wcm90b3R5cGUuX29uV2luZG93Qmx1ciA9IGZ1bmN0aW9uIChldikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuaGlkZGVuKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuX2VtaXQoZXYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENsaWNrT3V0c2lkZURpcmVjdGl2ZS5wcm90b3R5cGUuX2VtaXQgPSBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCF0aGlzLmNsaWNrT3V0c2lkZUVuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9uZ1pvbmUucnVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmNsaWNrT3V0c2lkZS5lbWl0KGV2KTsgfSk7XG4gICAgfTtcbiAgICBDbGlja091dHNpZGVEaXJlY3RpdmUucHJvdG90eXBlLl9zaG91bGRFeGNsdWRlID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5fbm9kZXNFeGNsdWRlZDsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBleGNsdWRlZE5vZGUgPSBfYVtfaV07XG4gICAgICAgICAgICBpZiAoZXhjbHVkZWROb2RlLmNvbnRhaW5zKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBDbGlja091dHNpZGVEaXJlY3RpdmUucHJvdG90eXBlLl9pbml0Q2xpY2tPdXRzaWRlTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuX25nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5fZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoZSwgX3RoaXMuX29uQ2xpY2tCb2R5KTsgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ2xpY2tPdXRzaWRlRGlyZWN0aXZlLnByb3RvdHlwZS5fcmVtb3ZlQ2xpY2tPdXRzaWRlTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuX25nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5fZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZSwgX3RoaXMuX29uQ2xpY2tCb2R5KTsgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ2xpY2tPdXRzaWRlRGlyZWN0aXZlLnByb3RvdHlwZS5faW5pdEF0dGFjaE91dHNpZGVPbkNsaWNrTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuX25nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5fZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLl9lbC5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZSwgX3RoaXMuX2luaXRPbkNsaWNrQm9keSk7IH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENsaWNrT3V0c2lkZURpcmVjdGl2ZS5wcm90b3R5cGUuX3JlbW92ZUF0dGFjaE91dHNpZGVPbkNsaWNrTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuX25nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5fZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF90aGlzLl9lbC5uYXRpdmVFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZSwgX3RoaXMuX2luaXRPbkNsaWNrQm9keSk7IH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENsaWNrT3V0c2lkZURpcmVjdGl2ZS5wcm90b3R5cGUuX2luaXRXaW5kb3dCbHVyTGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuX25nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIF90aGlzLl9vbldpbmRvd0JsdXIpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENsaWNrT3V0c2lkZURpcmVjdGl2ZS5wcm90b3R5cGUuX3JlbW92ZVdpbmRvd0JsdXJMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5fbmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgX3RoaXMuX29uV2luZG93Qmx1cik7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ2xpY2tPdXRzaWRlRGlyZWN0aXZlLmRlY29yYXRvcnMgPSBbXG4gICAgICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbeyBzZWxlY3RvcjogJ1tjbGlja091dHNpZGVdJyB9LF0gfVxuICAgIF07XG4gICAgQ2xpY2tPdXRzaWRlRGlyZWN0aXZlLmN0b3JQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gW1xuICAgICAgICB7IHR5cGU6IEVsZW1lbnRSZWYgfSxcbiAgICAgICAgeyB0eXBlOiBOZ1pvbmUgfSxcbiAgICAgICAgeyB0eXBlOiBPYmplY3QsIGRlY29yYXRvcnM6IFt7IHR5cGU6IEluamVjdCwgYXJnczogW1BMQVRGT1JNX0lELF0gfV0gfVxuICAgIF07IH07XG4gICAgQ2xpY2tPdXRzaWRlRGlyZWN0aXZlLnByb3BEZWNvcmF0b3JzID0ge1xuICAgICAgICBjbGlja091dHNpZGVFbmFibGVkOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICAgICAgYXR0YWNoT3V0c2lkZU9uQ2xpY2s6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgICAgICBkZWxheUNsaWNrT3V0c2lkZUluaXQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgICAgICBlbWl0T25CbHVyOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICAgICAgZXhjbHVkZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgICAgIGV4Y2x1ZGVCZWZvcmVDbGljazogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgICAgIGNsaWNrT3V0c2lkZUV2ZW50czogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgICAgIGNsaWNrT3V0c2lkZTogW3sgdHlwZTogT3V0cHV0IH1dXG4gICAgfTtcbiAgICByZXR1cm4gQ2xpY2tPdXRzaWRlRGlyZWN0aXZlO1xufSgpKTtcbmV4cG9ydCB7IENsaWNrT3V0c2lkZURpcmVjdGl2ZSB9O1xuIl19","map":null,"metadata":{},"sourceType":"module"}