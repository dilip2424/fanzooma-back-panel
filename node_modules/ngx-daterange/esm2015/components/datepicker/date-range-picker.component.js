import { Component, Input, Output, EventEmitter, HostListener, ViewEncapsulation } from '@angular/core';
import { FormGroup, FormControl } from '@angular/forms';
import { defaultDateFormat, defaultDateRangePickerOptions } from '../../constants';
import * as momentNs from 'moment';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';
import * as ɵngcc2 from '@angular/forms';
import * as ɵngcc3 from '../manual-inputs/manual-inputs.component';
import * as ɵngcc4 from '../calendar/calendar.component';
import * as ɵngcc5 from '../predefined-date-ranges/predefined-date-ranges.component';

function DateRangePickerComponent_div_0_ng_container_5_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵelementStart(1, "label");
    ɵngcc0.ɵɵtext(2);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelement(3, "input", 23);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const ctx_r2 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵattribute("for", ctx_r2.instanceId);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(ctx_r2.options.labelText);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("formControlName", ctx_r2.controlName);
    ɵngcc0.ɵɵattribute("id", ctx_r2.instanceId);
} }
const _c0 = function (a1, a2) { return { "col-12": true, "col-sm-6": a1, "col__mobile": a2 }; };
function DateRangePickerComponent_div_0_div_18_Template(rf, ctx) { if (rf & 1) {
    const _r8 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div", 9);
    ɵngcc0.ɵɵelementStart(1, "calendar", 24);
    ɵngcc0.ɵɵlistener("dateChanged", function DateRangePickerComponent_div_0_div_18_Template_calendar_dateChanged_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r7 = ɵngcc0.ɵɵnextContext(2); return ctx_r7.dateChanged($event); })("monthChanged", function DateRangePickerComponent_div_0_div_18_Template_calendar_monthChanged_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r9 = ɵngcc0.ɵɵnextContext(2); return ctx_r9.monthChanged($event); })("yearChanged", function DateRangePickerComponent_div_0_div_18_Template_calendar_yearChanged_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r8); const ctx_r10 = ɵngcc0.ɵɵnextContext(2); return ctx_r10.yearChanged($event); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction2(9, _c0, !ctx_r3.isMobile, ctx_r3.isMobile));
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("month", ctx_r3.toMonth)("year", ctx_r3.toYear)("format", ctx_r3.options.format)("selectedFromDate", ctx_r3.fromDate)("selectedToDate", ctx_r3.toDate)("minDate", ctx_r3.options.minDate)("maxDate", ctx_r3.options.maxDate)("icons", ctx_r3.options.icons);
} }
function DateRangePickerComponent_div_0_button_23_Template(rf, ctx) { if (rf & 1) {
    const _r12 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "button", 25);
    ɵngcc0.ɵɵlistener("click", function DateRangePickerComponent_div_0_button_23_Template_button_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r12); const ctx_r11 = ɵngcc0.ɵɵnextContext(2); return ctx_r11.reset($event); });
    ɵngcc0.ɵɵtext(1, "Reset");
    ɵngcc0.ɵɵelementEnd();
} }
function DateRangePickerComponent_div_0_button_24_Template(rf, ctx) { if (rf & 1) {
    const _r14 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "button", 26);
    ɵngcc0.ɵɵlistener("click", function DateRangePickerComponent_div_0_button_24_Template_button_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r14); const ctx_r13 = ɵngcc0.ɵɵnextContext(2); return ctx_r13.apply($event); });
    ɵngcc0.ɵɵtext(1, "Apply");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("disabled", !ctx_r5.enableApplyButton);
} }
function DateRangePickerComponent_div_0_div_33_Template(rf, ctx) { if (rf & 1) {
    const _r16 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div", 9);
    ɵngcc0.ɵɵelementStart(1, "calendar", 24);
    ɵngcc0.ɵɵlistener("dateChanged", function DateRangePickerComponent_div_0_div_33_Template_calendar_dateChanged_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r16); const ctx_r15 = ɵngcc0.ɵɵnextContext(2); return ctx_r15.dateChanged($event); })("monthChanged", function DateRangePickerComponent_div_0_div_33_Template_calendar_monthChanged_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r16); const ctx_r17 = ɵngcc0.ɵɵnextContext(2); return ctx_r17.monthChanged($event); })("yearChanged", function DateRangePickerComponent_div_0_div_33_Template_calendar_yearChanged_1_listener($event) { ɵngcc0.ɵɵrestoreView(_r16); const ctx_r18 = ɵngcc0.ɵɵnextContext(2); return ctx_r18.yearChanged($event); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r6 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction2(9, _c0, !ctx_r6.isMobile, ctx_r6.isMobile));
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("month", ctx_r6.toMonth)("year", ctx_r6.toYear)("format", ctx_r6.options.format)("selectedFromDate", ctx_r6.fromDate)("selectedToDate", ctx_r6.toDate)("minDate", ctx_r6.options.minDate)("maxDate", ctx_r6.options.maxDate)("icons", ctx_r6.options.icons);
} }
const _c1 = function (a0) { return { "modal-display": a0 }; };
const _c2 = function (a1, a2, a3) { return { "dateRangePickerModal": true, "dateRangePicker-single": a1, "is-chrome": a2, "mobile": a3 }; };
const _c3 = function (a1) { return { "col-12": true, "col-sm-6": a1 }; };
const _c4 = function (a1) { return { "calendar": true, "calendar-single": a1 }; };
const _c5 = function (a1, a2, a3, a4, a5, a6) { return { "dateRangePicker": true, "invisible": a1, "dateRangePicker-single": a2, "is-chrome": a3, "open-left": a4, "open-right": a5, "mobile": a6 }; };
function DateRangePickerComponent_div_0_Template(rf, ctx) { if (rf & 1) {
    const _r20 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div", 1);
    ɵngcc0.ɵɵelementStart(1, "div", null, 2);
    ɵngcc0.ɵɵprojection(3);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(4, "div", 3);
    ɵngcc0.ɵɵtemplate(5, DateRangePickerComponent_div_0_ng_container_5_Template, 4, 4, "ng-container", 4);
    ɵngcc0.ɵɵelementStart(6, "div", 5);
    ɵngcc0.ɵɵelementStart(7, "div", 6);
    ɵngcc0.ɵɵelementStart(8, "div", 7);
    ɵngcc0.ɵɵelementStart(9, "div", 8);
    ɵngcc0.ɵɵelementStart(10, "div", 9);
    ɵngcc0.ɵɵelementStart(11, "div", 10);
    ɵngcc0.ɵɵelementStart(12, "div", 11);
    ɵngcc0.ɵɵelementStart(13, "div", 12);
    ɵngcc0.ɵɵelementStart(14, "manual-inputs", 13);
    ɵngcc0.ɵɵlistener("dateFromInput", function DateRangePickerComponent_div_0_Template_manual_inputs_dateFromInput_14_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const ctx_r19 = ɵngcc0.ɵɵnextContext(); return ctx_r19.setDateFromInput($event); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(15, "div", 14);
    ɵngcc0.ɵɵelementStart(16, "div", 9);
    ɵngcc0.ɵɵelementStart(17, "calendar", 15);
    ɵngcc0.ɵɵlistener("monthChanged", function DateRangePickerComponent_div_0_Template_calendar_monthChanged_17_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const ctx_r21 = ɵngcc0.ɵɵnextContext(); return ctx_r21.monthChanged($event); })("yearChanged", function DateRangePickerComponent_div_0_Template_calendar_yearChanged_17_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const ctx_r22 = ɵngcc0.ɵɵnextContext(); return ctx_r22.yearChanged($event); })("dateChanged", function DateRangePickerComponent_div_0_Template_calendar_dateChanged_17_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const ctx_r23 = ɵngcc0.ɵɵnextContext(); return ctx_r23.dateChanged($event); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(18, DateRangePickerComponent_div_0_div_18_Template, 2, 12, "div", 16);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(19, "predefined-date-ranges", 17);
    ɵngcc0.ɵɵlistener("closeEvent", function DateRangePickerComponent_div_0_Template_predefined_date_ranges_closeEvent_19_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const ctx_r24 = ɵngcc0.ɵɵnextContext(); return ctx_r24.close($event); })("resetEvent", function DateRangePickerComponent_div_0_Template_predefined_date_ranges_resetEvent_19_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const ctx_r25 = ɵngcc0.ɵɵnextContext(); return ctx_r25.reset($event); })("applyEvent", function DateRangePickerComponent_div_0_Template_predefined_date_ranges_applyEvent_19_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const ctx_r26 = ɵngcc0.ɵɵnextContext(); return ctx_r26.apply($event); })("predefinedRange", function DateRangePickerComponent_div_0_Template_predefined_date_ranges_predefinedRange_19_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const ctx_r27 = ɵngcc0.ɵɵnextContext(); return ctx_r27.applyPredefinedRange($event); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(20, "div", 18);
    ɵngcc0.ɵɵelementStart(21, "button", 19);
    ɵngcc0.ɵɵlistener("click", function DateRangePickerComponent_div_0_Template_button_click_21_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const ctx_r28 = ɵngcc0.ɵɵnextContext(); return ctx_r28.close($event); });
    ɵngcc0.ɵɵtext(22, "Close");
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(23, DateRangePickerComponent_div_0_button_23_Template, 2, 0, "button", 20);
    ɵngcc0.ɵɵtemplate(24, DateRangePickerComponent_div_0_button_24_Template, 2, 1, "button", 21);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(25, "div", 9);
    ɵngcc0.ɵɵelementStart(26, "div", 10);
    ɵngcc0.ɵɵelementStart(27, "div", 11);
    ɵngcc0.ɵɵelementStart(28, "div", 12);
    ɵngcc0.ɵɵelementStart(29, "manual-inputs", 13);
    ɵngcc0.ɵɵlistener("dateFromInput", function DateRangePickerComponent_div_0_Template_manual_inputs_dateFromInput_29_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const ctx_r29 = ɵngcc0.ɵɵnextContext(); return ctx_r29.setDateFromInput($event); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(30, "div", 14);
    ɵngcc0.ɵɵelementStart(31, "div", 9);
    ɵngcc0.ɵɵelementStart(32, "calendar", 15);
    ɵngcc0.ɵɵlistener("monthChanged", function DateRangePickerComponent_div_0_Template_calendar_monthChanged_32_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const ctx_r30 = ɵngcc0.ɵɵnextContext(); return ctx_r30.monthChanged($event); })("yearChanged", function DateRangePickerComponent_div_0_Template_calendar_yearChanged_32_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const ctx_r31 = ɵngcc0.ɵɵnextContext(); return ctx_r31.yearChanged($event); })("dateChanged", function DateRangePickerComponent_div_0_Template_calendar_dateChanged_32_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const ctx_r32 = ɵngcc0.ɵɵnextContext(); return ctx_r32.dateChanged($event); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(33, DateRangePickerComponent_div_0_div_33_Template, 2, 12, "div", 16);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementStart(34, "predefined-date-ranges", 22);
    ɵngcc0.ɵɵlistener("closeEvent", function DateRangePickerComponent_div_0_Template_predefined_date_ranges_closeEvent_34_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const ctx_r33 = ɵngcc0.ɵɵnextContext(); return ctx_r33.close($event); })("resetEvent", function DateRangePickerComponent_div_0_Template_predefined_date_ranges_resetEvent_34_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const ctx_r34 = ɵngcc0.ɵɵnextContext(); return ctx_r34.reset($event); })("applyEvent", function DateRangePickerComponent_div_0_Template_predefined_date_ranges_applyEvent_34_listener($event) { ɵngcc0.ɵɵrestoreView(_r20); const ctx_r35 = ɵngcc0.ɵɵnextContext(); return ctx_r35.apply($event); });
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const _r1 = ɵngcc0.ɵɵreference(2);
    const ctx_r0 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(4);
    ɵngcc0.ɵɵproperty("formGroup", ctx_r0.parentFormGroup);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", _r1.childNodes.length === 0);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction1(47, _c1, ctx_r0.displayStyle));
    ɵngcc0.ɵɵadvance(4);
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction3(49, _c2, ctx_r0.options.singleCalendar, ctx_r0.checkChrome(), ctx_r0.isMobile));
    ɵngcc0.ɵɵadvance(4);
    ɵngcc0.ɵɵproperty("options", ctx_r0.options)("fromDate", ctx_r0.fromDate)("toDate", ctx_r0.toDate)("isMobile", ctx_r0.isMobile);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction1(53, _c3, !ctx_r0.isMobile && !ctx_r0.options.singleCalendar));
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction1(55, _c4, ctx_r0.options.singleCalendar))("isLeft", true)("month", ctx_r0.fromMonth)("year", ctx_r0.fromYear)("format", ctx_r0.options.format)("selectedFromDate", ctx_r0.fromDate)("selectedToDate", ctx_r0.toDate)("minDate", ctx_r0.options.minDate)("maxDate", ctx_r0.options.maxDate)("singleCalendar", ctx_r0.options.singleCalendar)("icons", ctx_r0.options.icons);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r0.options.singleCalendar);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("options", ctx_r0.options)("range", ctx_r0.range)("enableApplyButton", ctx_r0.enableApplyButton);
    ɵngcc0.ɵɵadvance(4);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r0.range && ctx_r0.options.showResetButton);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r0.options.autoApply);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction6(57, _c5, !ctx_r0.showCalendars, ctx_r0.options.singleCalendar, ctx_r0.checkChrome(), ctx_r0.options.position === "left", ctx_r0.options.position === "right", ctx_r0.isMobile));
    ɵngcc0.ɵɵadvance(4);
    ɵngcc0.ɵɵproperty("options", ctx_r0.options)("fromDate", ctx_r0.fromDate)("toDate", ctx_r0.toDate)("isMobile", ctx_r0.isMobile);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction1(64, _c3, !ctx_r0.isMobile && !ctx_r0.options.singleCalendar));
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction1(66, _c4, ctx_r0.options.singleCalendar))("isLeft", true)("month", ctx_r0.fromMonth)("year", ctx_r0.fromYear)("format", ctx_r0.options.format)("selectedFromDate", ctx_r0.fromDate)("selectedToDate", ctx_r0.toDate)("minDate", ctx_r0.options.minDate)("maxDate", ctx_r0.options.maxDate)("singleCalendar", ctx_r0.options.singleCalendar)("icons", ctx_r0.options.icons);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r0.options.singleCalendar);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("options", ctx_r0.options)("range", ctx_r0.range)("enableApplyButton", ctx_r0.enableApplyButton);
} }
const _c6 = ["*"];
const moment = momentNs;
let instanceCount = 0;
export class DateRangePickerComponent {
    constructor() {
        this.options = defaultDateRangePickerOptions;
        this.controlName = 'dateRange';
        this.instanceId = null;
        this.fromDate = null;
        this.toDate = null;
        this.datepickerReset = new EventEmitter();
        this.rangeSelected = new EventEmitter();
        this.isMobile = false;
        this.range = '';
        this.showCalendars = false;
        this.displayStyle = false;
        if (!this.instanceId) {
            // assign auto-id
            this.instanceId = `dateRangePicker-${instanceCount++}`;
        }
    }
    get enableApplyButton() {
        let enabled = !this.options.autoApply && this.fromDate !== null;
        if (this.options.singleCalendar) {
            return enabled;
        }
        return enabled && this.toDate !== null;
    }
    handleClick(event) {
        var _a;
        const target = event.target;
        // close the DatePicker if clicking outside is not allowed
        if (!this.options.clickOutsideAllowed) {
            let targetPathClassNames = [];
            try {
                targetPathClassNames = event.composedPath().map((obj) => obj['className']) || [''];
            }
            catch (error) {
                // IE / Edge
                targetPathClassNames = (_a = event['path']) === null || _a === void 0 ? void 0 : _a.map(obj => obj.className);
            }
            let containerElementClassRoot = this.options.modal === true ? 'dateRangePickerModal' : 'dateRangePicker';
            const targetExistsInPath = targetPathClassNames === null || targetPathClassNames === void 0 ? void 0 : targetPathClassNames.some(className => {
                if (typeof className === 'string') {
                    return className && className.includes(containerElementClassRoot);
                }
                return false;
            });
            if (!targetExistsInPath) {
                this.toggleCalendarVisibility(false);
            }
        }
        // Close the DatePicker if the target input was clicked
        if (target.id === this.instanceId) {
            this.toggleCalendarVisibility(!this.showCalendars);
        }
    }
    ngOnInit() {
        if (navigator) {
            if (navigator.userAgent.match(/Android/i)
                || navigator.userAgent.match(/webOS/i)
                || navigator.userAgent.match(/iPhone/i)
                || navigator.userAgent.match(/iPod/i)
                || navigator.userAgent.match(/BlackBerry/i)
                || navigator.userAgent.match(/Windows Phone/i)) {
                this.isMobile = true;
            }
        }
        // ensure dates in options are valid
        this.validateOptionDates();
        // ensure input dates are within the min/max dates in options
        this.validateInputDates();
        if (this.options.preDefinedRanges && this.options.preDefinedRanges.length > 0) {
            this.defaultRanges = this.validateAndAssignPredefinedRanges(this.options.preDefinedRanges);
        }
        // assign values not present in options with default values
        const optionsKeys = Object.keys(this.options);
        const defaultValuesKeys = Object.keys(defaultDateRangePickerOptions);
        defaultValuesKeys.forEach((key) => {
            if (!optionsKeys.includes(key)) {
                this.options[key] = defaultDateRangePickerOptions[key];
            }
        });
        // update calendar grid
        this.updateCalendar();
        // create parent form group if it doesn't exist
        if (!this.parentFormGroup) {
            this.parentFormGroup = new FormGroup({});
        }
        // add form control to parent form group
        const value = this.formatRangeAsString();
        const control = new FormControl({ value, disabled: this.options.disableInputDisplay }, this.options.validators);
        if (this.options.disabled) {
            control.disable();
        }
        this.parentFormGroup.addControl(this.controlName, control);
        // set value of control
        this.setRange();
    }
    validateInputDates() {
        if (typeof this.fromDate === 'string') {
            this.fromDate = moment(this.fromDate);
        }
        if (typeof this.toDate === 'string') {
            this.toDate = moment(this.toDate);
        }
        if (this.fromDate && this.options.minDate && this.fromDate.isBefore(this.options.minDate, 'date')) {
            throw new RangeError('@Input fromDate is before the specified minDate in options');
        }
        if (this.toDate && this.options.maxDate && this.toDate.isAfter(this.options.maxDate, 'date')) {
            throw new RangeError('@Input toDate is after the specified maxDate in options');
        }
    }
    validateOptionDates() {
        // validate maxDate isn't before minDate or vice versa
        if (this.options) {
            if (this.options.minDate && this.options.maxDate) {
                if (this.options.minDate.isAfter(this.options.maxDate, 'date')) {
                    throw new RangeError('minDate specified in options is after the maxDate');
                }
                else if (this.options.maxDate.isBefore(this.options.minDate, 'date')) {
                    throw new RangeError('maxDate specified in options is before the minDate');
                }
            }
        }
    }
    // assists CSS to fix small positioning bug with From:/To: date text
    checkChrome() {
        return window['chrome'] ? 'is-chrome' : '';
    }
    toggleCalendarVisibility(value) {
        if (this.options.modal === true) {
            this.displayStyle = value !== null ? value === false ? false : true : this.showCalendars === false ? false : true;
        }
        else {
            this.showCalendars = value !== null ? value : !this.showCalendars;
        }
    }
    setFromToMonthYear(fromDate, toDate) {
        let tempFromDate = fromDate || this.fromDate || moment();
        let tempToDate = toDate || this.toDate || moment();
        if (!(tempFromDate instanceof moment)) {
            tempFromDate = moment(tempFromDate, defaultDateFormat);
        }
        if (!(tempToDate instanceof moment)) {
            tempToDate = moment(tempToDate, defaultDateFormat);
        }
        this.fromMonth = tempFromDate.get('month');
        this.fromYear = tempFromDate.get('year');
        this.toMonth = tempToDate.get('month');
        this.toYear = tempToDate.get('year');
    }
    updateCalendar() {
        // get month and year to show calendar
        this.setFromToMonthYear();
        this.setRange();
    }
    // update from/to based on selection
    dateChanged(changedData) {
        const value = changedData.day;
        const isLeft = changedData.isLeft;
        if (isLeft) {
            this.fromDate = value;
            if (this.fromDate.isAfter(this.toDate, 'date')) {
                this.toDate = this.fromDate.clone();
            }
        }
        else {
            this.toDate = value;
            if (this.toDate.isBefore(this.fromDate, 'date')) {
                this.fromDate = this.toDate.clone();
            }
        }
        this.setFromToMonthYear(this.fromDate, this.toDate);
        if (this.options.autoApply && (this.toDate || this.options.singleCalendar)) {
            this.toggleCalendarVisibility(false);
            this.setRange();
            this.emitRangeSelected();
        }
    }
    emitRangeSelected(data) {
        if (!data) {
            data = this.options.singleCalendar ? { start: this.fromDate } : { start: this.fromDate, end: this.toDate };
        }
        this.rangeSelected.emit(data);
    }
    getMoment(value) {
        return moment(value, this.options.format);
    }
    formatRangeAsString() {
        let range = '';
        if (this.options.singleCalendar && this.fromDate) {
            if (typeof this.fromDate === 'string') {
                this.fromDate = moment(this.fromDate);
            }
            range = this.fromDate.format(this.options.format);
        }
        else if (!this.options.singleCalendar && this.fromDate && this.toDate) {
            if (typeof this.fromDate === 'string') {
                this.fromDate = moment(this.fromDate);
            }
            if (typeof this.toDate === 'string') {
                this.toDate = moment(this.toDate);
            }
            range = `${this.fromDate.format(this.options.format)} - ${this.toDate.format(this.options.format)}`;
        }
        return range;
    }
    setRange() {
        var _a;
        this.range = this.formatRangeAsString();
        if (this.parentFormGroup) {
            const control = (_a = this.parentFormGroup) === null || _a === void 0 ? void 0 : _a.get(this.controlName);
            if (control) {
                control.setValue(this.range);
                control.updateValueAndValidity();
            }
        }
    }
    setDateFromInput(event) {
        const isLeft = event.isLeft;
        const target = event.event.target;
        try {
            if (target.value) {
                const day = this.getMoment(target.value);
                if (!day.isBefore(this.options.minDate) && !day.isAfter(this.options.maxDate)) {
                    if (isLeft && !this.fromDate) {
                        this.fromDate = day;
                    }
                    if (!isLeft && !this.toDate) {
                        this.toDate = day;
                    }
                    this.dateChanged({
                        day,
                        isLeft,
                    });
                    if (this.fromDate && this.toDate) {
                        this.setFromToMonthYear(this.fromDate, this.toDate);
                        if (!this.options.autoApply) {
                            this.emitRangeSelected();
                        }
                    }
                }
                else {
                    // assume nothing - reset values
                    this.fromDate = null;
                    this.toDate = null;
                    target.value = '';
                    target.focus();
                }
            }
        }
        catch (e) {
            console.error(e);
        }
    }
    monthChanged(data) {
        let temp;
        if (data.isLeft) {
            temp = moment([this.fromYear, this.fromMonth]).add(data.value, 'month');
            this.fromMonth = temp === null || temp === void 0 ? void 0 : temp.get('month');
            this.fromYear = temp === null || temp === void 0 ? void 0 : temp.get('year');
        }
        else {
            temp = moment([this.toYear, this.toMonth]).add(data.value, 'month');
            this.toMonth = temp === null || temp === void 0 ? void 0 : temp.get('month');
            this.toYear = temp === null || temp === void 0 ? void 0 : temp.get('year');
        }
    }
    yearChanged(data) {
        let temp;
        if (data.isLeft) {
            temp = moment([this.fromYear, this.fromMonth]).add(data.value, 'year');
            this.fromMonth = temp === null || temp === void 0 ? void 0 : temp.get('month');
            this.fromYear = temp === null || temp === void 0 ? void 0 : temp.get('year');
        }
        else {
            temp = moment([this.toYear, this.toMonth]).add(data.value, 'year');
            this.toMonth = temp === null || temp === void 0 ? void 0 : temp.get('month');
            this.toYear = temp === null || temp === void 0 ? void 0 : temp.get('year');
        }
    }
    close(event) {
        this.toggleCalendarVisibility(false);
        event.stopPropagation();
    }
    reset(event) {
        this.fromDate = null;
        this.toDate = null;
        this.setRange();
        this.datepickerReset.emit();
        event.stopPropagation();
    }
    apply(event) {
        this.toggleCalendarVisibility(false);
        this.setRange();
        this.emitRangeSelected();
        event.stopPropagation();
    }
    applyPredefinedRange(event) {
        // adjust to/from month/year so calendar months and years match range
        this.setFromToMonthYear(event.definedDateRange.value.start, event.definedDateRange.value.end);
        this.fromDate = event.definedDateRange.value.start;
        this.toDate = event.definedDateRange.value.end;
        if (this.options.autoApply) {
            this.apply(event.event);
        }
    }
    validateAndAssignPredefinedRanges(ranges) {
        return ranges.filter(range => {
            if (range.value.start.isAfter(range.value.end, 'date')) {
                throw new RangeError(`Pre-defined range "${range.name}" start date cannot be after the end date for the range.`);
            }
            if (this.options.minDate && range.value.start.isBefore(this.options.minDate)) {
                throw new RangeError(`Pre-defined range "${range.name}" start date is before the specified minDate in your options.`);
            }
            if (this.options.maxDate && range.value.end.isAfter(this.options.maxDate)) {
                throw new RangeError(`Pre-defined range "${range.name}" end date is after the specified maxDate in your options.`);
            }
            // add range to ranges
            return true;
        });
    }
}
DateRangePickerComponent.ɵfac = function DateRangePickerComponent_Factory(t) { return new (t || DateRangePickerComponent)(); };
DateRangePickerComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: DateRangePickerComponent, selectors: [["date-range-picker"]], hostBindings: function DateRangePickerComponent_HostBindings(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵlistener("click", function DateRangePickerComponent_click_HostBindingHandler($event) { return ctx.handleClick($event); }, false, ɵngcc0.ɵɵresolveDocument);
    } }, inputs: { options: "options", controlName: "controlName", instanceId: "instanceId", fromDate: "fromDate", toDate: "toDate", parentFormGroup: "parentFormGroup" }, outputs: { datepickerReset: "datepickerReset", rangeSelected: "rangeSelected" }, ngContentSelectors: _c6, decls: 1, vars: 1, consts: [["class", "dateRangePicker-wrapper", 4, "ngIf"], [1, "dateRangePicker-wrapper"], ["content", ""], [1, "form-group", 3, "formGroup"], [4, "ngIf"], ["tabindex", "-1", "role", "dialog", 1, "modal", 3, "ngClass"], ["role", "document", 1, "modal-dialog", "modal-dialog-centered"], [1, "modal-content"], [1, "modal-body"], [3, "ngClass"], [1, "container-fluid"], [1, "row"], [1, "col"], [3, "options", "fromDate", "toDate", "isMobile", "dateFromInput"], [1, "row", "row-calendars"], [3, "ngClass", "isLeft", "month", "year", "format", "selectedFromDate", "selectedToDate", "minDate", "maxDate", "singleCalendar", "icons", "monthChanged", "yearChanged", "dateChanged"], [3, "ngClass", 4, "ngIf"], [3, "options", "range", "enableApplyButton", "closeEvent", "resetEvent", "applyEvent", "predefinedRange"], [1, "modal-footer"], ["type", "button", 1, "btn", "btn-outline-secondary", "btn-sm", 3, "click"], ["type", "button", "class", "btn btn-outline-secondary btn-sm ml-3", 3, "click", 4, "ngIf"], ["type", "button", "class", "btn btn-primary btn-sm ml-3", 3, "disabled", "click", 4, "ngIf"], [3, "options", "range", "enableApplyButton", "closeEvent", "resetEvent", "applyEvent"], ["type", "text", 1, "form-control", 3, "formControlName"], [1, "calendar", 3, "month", "year", "format", "selectedFromDate", "selectedToDate", "minDate", "maxDate", "icons", "dateChanged", "monthChanged", "yearChanged"], ["type", "button", 1, "btn", "btn-outline-secondary", "btn-sm", "ml-3", 3, "click"], ["type", "button", 1, "btn", "btn-primary", "btn-sm", "ml-3", 3, "disabled", "click"]], template: function DateRangePickerComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef();
        ɵngcc0.ɵɵtemplate(0, DateRangePickerComponent_div_0_Template, 35, 68, "div", 0);
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngIf", ctx.parentFormGroup);
    } }, directives: [ɵngcc1.NgIf, ɵngcc2.NgControlStatusGroup, ɵngcc2.FormGroupDirective, ɵngcc1.NgClass, ɵngcc3.ManualInputsComponent, ɵngcc4.CalendarComponent, ɵngcc5.PredefinedDateRangesComponent, ɵngcc2.DefaultValueAccessor, ɵngcc2.NgControlStatus, ɵngcc2.FormControlName], styles: [".dateRangePicker-wrapper[_ngcontent-%COMP%]{border:none;position:relative}.dateRangePicker-wrapper[_ngcontent-%COMP%]   input.form-control[disabled][_ngcontent-%COMP%]{background-color:#fff}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .modal-body[_ngcontent-%COMP%]{padding:0!important}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{-webkit-backdrop-filter:brightness(50%);backdrop-filter:brightness(50%)}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .modal-display[_ngcontent-%COMP%]{display:flex}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .modal-display[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{box-shadow:none;display:flex}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{border:0;border-radius:8px;box-shadow:0 0 10px 0 rgba(129,139,144,.5);display:flex;width:602px}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:auto}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal[_ngcontent-%COMP%]{border-top-left-radius:5px;border-top-right-radius:5px;font-family:Roboto,Helvetica,Arial,sans-serif;overflow:visible;z-index:3000}@media screen and (min-width:576px){.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal[_ngcontent-%COMP%]{min-width:600px}}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal.dateRangePicker-single[_ngcontent-%COMP%], .dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal.mobile[_ngcontent-%COMP%]{min-width:300px}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal.dateRangePicker-single[_ngcontent-%COMP%]:after, .dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal.dateRangePicker-single[_ngcontent-%COMP%]:before, .dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal.mobile[_ngcontent-%COMP%]:after, .dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal.mobile[_ngcontent-%COMP%]:before{border-bottom-color:#fff}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal.is-chrome[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%]   .input-with-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;top:1px}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal[_ngcontent-%COMP%]   .btn.btn-link[_ngcontent-%COMP%]{min-width:60px;width:60px}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%]{background-color:#6e777c;border-top-left-radius:5px;border-top-right-radius:5px;color:#fff;font-size:16px}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%]{min-width:270px;padding:.5rem 15px}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%]   .input-with-icon[_ngcontent-%COMP%]{align-content:flex-start;align-items:center!important;display:flex}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%]   .input-with-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;margin-right:.5rem}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%]   .input-with-icon[_ngcontent-%COMP%]   i.material-icons[_ngcontent-%COMP%]{top:0}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%]   .input-with-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:1}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background:none;border:0;color:#fff;display:inline-block;padding:0;width:150px}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::-moz-placeholder{color:#fff}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#fff}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal[_ngcontent-%COMP%]   .row-1s[_ngcontent-%COMP%]   .col__mobile[_ngcontent-%COMP%]{border-top:1px dotted #ccc;margin-top:1rem}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal[_ngcontent-%COMP%]:not(.mobile)   .form-inputs[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2), .dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePickerModal[_ngcontent-%COMP%]:not(.mobile)   .row-calendars[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-left:2px solid #c6d1d6}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker[_ngcontent-%COMP%]{background:#fff;border-radius:9px;box-shadow:0 0 10px 0 rgba(129,139,144,.5);font-family:Roboto,Helvetica,Arial,sans-serif;overflow:visible;position:absolute;top:88px;z-index:3000}@media screen and (min-width:576px){.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker[_ngcontent-%COMP%]{min-width:600px}}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker.dateRangePicker-single[_ngcontent-%COMP%], .dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker.mobile[_ngcontent-%COMP%]{min-width:300px}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker.dateRangePicker-single[_ngcontent-%COMP%]:after, .dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker.dateRangePicker-single[_ngcontent-%COMP%]:before, .dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker.mobile[_ngcontent-%COMP%]:after, .dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker.mobile[_ngcontent-%COMP%]:before{border-bottom-color:#fff}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker[_ngcontent-%COMP%]:after, .dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker[_ngcontent-%COMP%]:before{border-bottom:10px solid #6e777c;border-left:10px solid transparent;border-right:10px solid transparent;content:\"\";height:0;position:absolute;top:-10px;width:0}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker.open-left[_ngcontent-%COMP%]{left:0}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker.open-left[_ngcontent-%COMP%]:before{left:10px}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker.open-left[_ngcontent-%COMP%]:after{display:none}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker.open-right[_ngcontent-%COMP%]{right:0}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker.open-right[_ngcontent-%COMP%]:before{display:none}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker.open-right[_ngcontent-%COMP%]:after{right:10px}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker.is-chrome[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%]   .input-with-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;top:1px}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker[_ngcontent-%COMP%]   .btn.btn-link[_ngcontent-%COMP%]{min-width:auto;width:auto}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%]{background-color:#6e777c;border-top-left-radius:5px;border-top-right-radius:5px;color:#fff;font-size:16px}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%]{min-width:270px;padding:.5rem 15px}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%]   .input-with-icon[_ngcontent-%COMP%]{align-content:flex-start;align-items:center!important;display:flex}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%]   .input-with-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;margin-right:.5rem}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%]   .input-with-icon[_ngcontent-%COMP%]   i.material-icons[_ngcontent-%COMP%]{top:0}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%]   .input-with-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:1}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background:none;border:0;color:#fff;display:inline-block;padding:0;width:150px}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::-moz-placeholder{color:#fff}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker[_ngcontent-%COMP%]   .form-inputs[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#fff}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker[_ngcontent-%COMP%]   .row-calendars[_ngcontent-%COMP%]   .col__mobile[_ngcontent-%COMP%]{border-top:1px dotted #ccc;margin-top:1rem}.dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker[_ngcontent-%COMP%]:not(.mobile)   .form-inputs[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2), .dateRangePicker-wrapper[_ngcontent-%COMP%]   .dateRangePicker[_ngcontent-%COMP%]:not(.mobile)   .row-calendars[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){border-left:2px solid #c6d1d6}.dateRangePicker-wrapper[_ngcontent-%COMP%]   i.material-icons[_ngcontent-%COMP%]{position:relative;top:2px}"] });
DateRangePickerComponent.ctorParameters = () => [];
DateRangePickerComponent.propDecorators = {
    options: [{ type: Input }],
    controlName: [{ type: Input }],
    instanceId: [{ type: Input }],
    parentFormGroup: [{ type: Input }],
    fromDate: [{ type: Input }],
    toDate: [{ type: Input }],
    datepickerReset: [{ type: Output }],
    rangeSelected: [{ type: Output }],
    handleClick: [{ type: HostListener, args: ['document:click', ['$event'],] }]
};
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(DateRangePickerComponent, [{
        type: Component,
        args: [{
                encapsulation: ViewEncapsulation.Emulated,
                selector: 'date-range-picker',
                template: "<div class=\"dateRangePicker-wrapper\" *ngIf=\"parentFormGroup\">\n  <div #content>\n    <ng-content></ng-content>\n  </div>\n  <div class=\"form-group\" [formGroup]=\"parentFormGroup\">\n    <ng-container *ngIf=\"content.childNodes.length === 0\">\n      <label [attr.for]=\"instanceId\">{{ options.labelText }}</label>\n      <input [attr.id]=\"instanceId\" class=\"form-control\" type=\"text\" [formControlName]=\"controlName\">\n    </ng-container>\n\n    <div class=\"modal\" tabindex=\"-1\" role=\"dialog\" [ngClass]=\"{ 'modal-display': displayStyle}\">\n      <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-body\">\n            <div [ngClass]=\"{'dateRangePickerModal': true,  'dateRangePicker-single': options.singleCalendar, 'is-chrome': checkChrome(), 'mobile': isMobile }\">\n              <div class=\"container-fluid\">\n                <div class=\"row\">\n                  <div class=\"col\">\n        \n                    <!-- Manual Inputs -->\n                    <manual-inputs [options]=\"options\" [fromDate]=\"fromDate\" [toDate]=\"toDate\" [isMobile]=\"isMobile\" (dateFromInput)=\"setDateFromInput($event)\"></manual-inputs>\n        \n                    <!-- Calendars -->\n                    <div class=\"row row-calendars\">\n                      <div [ngClass]=\"{ 'col-12': true, 'col-sm-6': !isMobile && !options.singleCalendar }\">\n                        <calendar [ngClass]=\"{ 'calendar': true, 'calendar-single': options.singleCalendar }\" [isLeft]=\"true\" [month]=\"fromMonth\" [year]=\"fromYear\" (monthChanged)=monthChanged($event) (yearChanged)=\"yearChanged($event)\" (dateChanged)=\"dateChanged($event)\" [format]=\"options.format\" [selectedFromDate]=\"fromDate\" [selectedToDate]=\"toDate\" [minDate]=\"options.minDate\" [maxDate]=\"options.maxDate\" [singleCalendar]=\"options.singleCalendar\" [icons]=\"options.icons\"></calendar>\n                      </div>\n        \n                      <div [ngClass]=\"{ 'col-12': true, 'col-sm-6': !isMobile, 'col__mobile': isMobile }\" *ngIf=\"!options.singleCalendar\">\n                        <calendar class=\"calendar\" [month]=\"toMonth\" [year]=\"toYear\" [format]=\"options.format\" (dateChanged)=\"dateChanged($event)\" (monthChanged)=\"monthChanged($event)\" (yearChanged)=\"yearChanged($event)\" [selectedFromDate]=\"fromDate\" [selectedToDate]=\"toDate\" [minDate]=\"options.minDate\" [maxDate]=\"options.maxDate\" [icons]=\"options.icons\"></calendar>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n        \n                <!-- Pre-Defined Date Ranges -->\n                <predefined-date-ranges [options]=\"options\" [range]=\"range\" [enableApplyButton]=\"enableApplyButton\" (closeEvent)=\"close($event)\" (resetEvent)=\"reset($event)\" (applyEvent)=\"apply($event)\" (predefinedRange)=\"applyPredefinedRange($event)\"></predefined-date-ranges>\n        \n              </div>\n            </div>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-outline-secondary btn-sm\" (click)=\"close($event)\">Close</button>\n            <button type=\"button\" class=\"btn btn-outline-secondary btn-sm ml-3\" (click)=\"reset($event)\" *ngIf=\"range && options.showResetButton\">Reset</button>\n            <button type=\"button\" class=\"btn btn-primary btn-sm ml-3\" [disabled]=\"!enableApplyButton\" (click)=\"apply($event)\" *ngIf=\"!options.autoApply\">Apply</button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Desktop Browsers -->\n    <div [ngClass]=\"{'dateRangePicker': true, 'invisible': !showCalendars, 'dateRangePicker-single': options.singleCalendar, 'is-chrome': checkChrome(), 'open-left': options.position === 'left', 'open-right': options.position === 'right', 'mobile': isMobile }\">\n      <div class=\"container-fluid\">\n        <div class=\"row\">\n          <div class=\"col\">\n\n            <!-- Manual Inputs -->\n            <manual-inputs [options]=\"options\" [fromDate]=\"fromDate\" [toDate]=\"toDate\" [isMobile]=\"isMobile\" (dateFromInput)=\"setDateFromInput($event)\"></manual-inputs>\n\n            <!-- Calendars -->\n            <div class=\"row row-calendars\">\n              <div [ngClass]=\"{ 'col-12': true, 'col-sm-6': !isMobile && !options.singleCalendar }\">\n                <calendar [ngClass]=\"{ 'calendar': true, 'calendar-single': options.singleCalendar }\" [isLeft]=\"true\" [month]=\"fromMonth\" [year]=\"fromYear\" (monthChanged)=monthChanged($event) (yearChanged)=\"yearChanged($event)\" (dateChanged)=\"dateChanged($event)\" [format]=\"options.format\" [selectedFromDate]=\"fromDate\" [selectedToDate]=\"toDate\" [minDate]=\"options.minDate\" [maxDate]=\"options.maxDate\" [singleCalendar]=\"options.singleCalendar\" [icons]=\"options.icons\"></calendar>\n              </div>\n\n              <div [ngClass]=\"{ 'col-12': true, 'col-sm-6': !isMobile, 'col__mobile': isMobile }\" *ngIf=\"!options.singleCalendar\">\n                <calendar class=\"calendar\" [month]=\"toMonth\" [year]=\"toYear\" [format]=\"options.format\" (dateChanged)=\"dateChanged($event)\" (monthChanged)=\"monthChanged($event)\" (yearChanged)=\"yearChanged($event)\" [selectedFromDate]=\"fromDate\" [selectedToDate]=\"toDate\" [minDate]=\"options.minDate\" [maxDate]=\"options.maxDate\" [icons]=\"options.icons\"></calendar>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Pre-Defined Date Ranges -->\n        <predefined-date-ranges [options]=\"options\" [range]=\"range\" [enableApplyButton]=\"enableApplyButton\" (closeEvent)=\"close($event)\" (resetEvent)=\"reset($event)\" (applyEvent)=\"apply($event)\"></predefined-date-ranges>\n\n      </div>\n    </div>\n\n  </div>\n</div>\n",
                styles: [".dateRangePicker-wrapper{border:none;position:relative}.dateRangePicker-wrapper input.form-control[disabled]{background-color:#fff}.dateRangePicker-wrapper .modal-body{padding:0!important}.dateRangePicker-wrapper .modal{-webkit-backdrop-filter:brightness(50%);backdrop-filter:brightness(50%)}.dateRangePicker-wrapper .modal-display{display:flex}.dateRangePicker-wrapper .modal-display .modal-dialog{box-shadow:none;display:flex}.dateRangePicker-wrapper .modal-content{border:0;border-radius:8px;box-shadow:0 0 10px 0 rgba(129,139,144,.5);display:flex;width:602px}.dateRangePicker-wrapper .modal-content .modal-footer .btn{width:auto}.dateRangePicker-wrapper .dateRangePickerModal{border-top-left-radius:5px;border-top-right-radius:5px;font-family:Roboto,Helvetica,Arial,sans-serif;overflow:visible;z-index:3000}@media screen and (min-width:576px){.dateRangePicker-wrapper .dateRangePickerModal{min-width:600px}}.dateRangePicker-wrapper .dateRangePickerModal.dateRangePicker-single,.dateRangePicker-wrapper .dateRangePickerModal.mobile{min-width:300px}.dateRangePicker-wrapper .dateRangePickerModal.dateRangePicker-single:after,.dateRangePicker-wrapper .dateRangePickerModal.dateRangePicker-single:before,.dateRangePicker-wrapper .dateRangePickerModal.mobile:after,.dateRangePicker-wrapper .dateRangePickerModal.mobile:before{border-bottom-color:#fff}.dateRangePicker-wrapper .dateRangePickerModal.is-chrome .form-inputs .input-with-icon span{position:relative;top:1px}.dateRangePicker-wrapper .dateRangePickerModal .btn,.dateRangePicker-wrapper .dateRangePickerModal .btn.btn-link{min-width:60px;width:60px}.dateRangePicker-wrapper .dateRangePickerModal .form-inputs{background-color:#6e777c;border-top-left-radius:5px;border-top-right-radius:5px;color:#fff;font-size:16px}.dateRangePicker-wrapper .dateRangePickerModal .form-inputs>.col{min-width:270px;padding:.5rem 15px}.dateRangePicker-wrapper .dateRangePickerModal .form-inputs .input-with-icon{align-content:flex-start;align-items:center!important;display:flex}.dateRangePicker-wrapper .dateRangePickerModal .form-inputs .input-with-icon i{color:#fff;margin-right:.5rem}.dateRangePicker-wrapper .dateRangePickerModal .form-inputs .input-with-icon i.material-icons{top:0}.dateRangePicker-wrapper .dateRangePickerModal .form-inputs .input-with-icon span{line-height:1}.dateRangePicker-wrapper .dateRangePickerModal .form-inputs .form-control{background:none;border:0;color:#fff;display:inline-block;padding:0;width:150px}.dateRangePicker-wrapper .dateRangePickerModal .form-inputs .form-control::-moz-placeholder{color:#fff}.dateRangePicker-wrapper .dateRangePickerModal .form-inputs .form-control::placeholder{color:#fff}.dateRangePicker-wrapper .dateRangePickerModal .row-1s .col__mobile{border-top:1px dotted #ccc;margin-top:1rem}.dateRangePicker-wrapper .dateRangePickerModal:not(.mobile) .form-inputs>div:nth-child(2),.dateRangePicker-wrapper .dateRangePickerModal:not(.mobile) .row-calendars>div:nth-child(2){border-left:2px solid #c6d1d6}.dateRangePicker-wrapper .dateRangePicker{background:#fff;border-radius:9px;box-shadow:0 0 10px 0 rgba(129,139,144,.5);font-family:Roboto,Helvetica,Arial,sans-serif;overflow:visible;position:absolute;top:88px;z-index:3000}@media screen and (min-width:576px){.dateRangePicker-wrapper .dateRangePicker{min-width:600px}}.dateRangePicker-wrapper .dateRangePicker.dateRangePicker-single,.dateRangePicker-wrapper .dateRangePicker.mobile{min-width:300px}.dateRangePicker-wrapper .dateRangePicker.dateRangePicker-single:after,.dateRangePicker-wrapper .dateRangePicker.dateRangePicker-single:before,.dateRangePicker-wrapper .dateRangePicker.mobile:after,.dateRangePicker-wrapper .dateRangePicker.mobile:before{border-bottom-color:#fff}.dateRangePicker-wrapper .dateRangePicker:after,.dateRangePicker-wrapper .dateRangePicker:before{border-bottom:10px solid #6e777c;border-left:10px solid transparent;border-right:10px solid transparent;content:\"\";height:0;position:absolute;top:-10px;width:0}.dateRangePicker-wrapper .dateRangePicker.open-left{left:0}.dateRangePicker-wrapper .dateRangePicker.open-left:before{left:10px}.dateRangePicker-wrapper .dateRangePicker.open-left:after{display:none}.dateRangePicker-wrapper .dateRangePicker.open-right{right:0}.dateRangePicker-wrapper .dateRangePicker.open-right:before{display:none}.dateRangePicker-wrapper .dateRangePicker.open-right:after{right:10px}.dateRangePicker-wrapper .dateRangePicker.is-chrome .form-inputs .input-with-icon span{position:relative;top:1px}.dateRangePicker-wrapper .dateRangePicker .btn,.dateRangePicker-wrapper .dateRangePicker .btn.btn-link{min-width:auto;width:auto}.dateRangePicker-wrapper .dateRangePicker .form-inputs{background-color:#6e777c;border-top-left-radius:5px;border-top-right-radius:5px;color:#fff;font-size:16px}.dateRangePicker-wrapper .dateRangePicker .form-inputs>.col{min-width:270px;padding:.5rem 15px}.dateRangePicker-wrapper .dateRangePicker .form-inputs .input-with-icon{align-content:flex-start;align-items:center!important;display:flex}.dateRangePicker-wrapper .dateRangePicker .form-inputs .input-with-icon i{color:#fff;margin-right:.5rem}.dateRangePicker-wrapper .dateRangePicker .form-inputs .input-with-icon i.material-icons{top:0}.dateRangePicker-wrapper .dateRangePicker .form-inputs .input-with-icon span{line-height:1}.dateRangePicker-wrapper .dateRangePicker .form-inputs .form-control{background:none;border:0;color:#fff;display:inline-block;padding:0;width:150px}.dateRangePicker-wrapper .dateRangePicker .form-inputs .form-control::-moz-placeholder{color:#fff}.dateRangePicker-wrapper .dateRangePicker .form-inputs .form-control::placeholder{color:#fff}.dateRangePicker-wrapper .dateRangePicker .row-calendars .col__mobile{border-top:1px dotted #ccc;margin-top:1rem}.dateRangePicker-wrapper .dateRangePicker:not(.mobile) .form-inputs>div:nth-child(2),.dateRangePicker-wrapper .dateRangePicker:not(.mobile) .row-calendars>div:nth-child(2){border-left:2px solid #c6d1d6}.dateRangePicker-wrapper i.material-icons{position:relative;top:2px}"]
            }]
    }], function () { return []; }, { options: [{
            type: Input
        }], controlName: [{
            type: Input
        }], instanceId: [{
            type: Input
        }], fromDate: [{
            type: Input
        }], toDate: [{
            type: Input
        }], datepickerReset: [{
            type: Output
        }], rangeSelected: [{
            type: Output
        }], handleClick: [{
            type: HostListener,
            args: ['document:click', ['$event']]
        }], parentFormGroup: [{
            type: Input
        }] }); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS1yYW5nZS1waWNrZXIuY29tcG9uZW50LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvbW9kdWxlcy9uZ3gtZGF0ZXJhbmdlL3NyYy9jb21wb25lbnRzL2RhdGVwaWNrZXIvZGF0ZS1yYW5nZS1waWNrZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFVLGlCQUFpQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2hILE9BQU8sRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFeEQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLDZCQUE2QixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFHbkYsT0FBTyxLQUFLLFFBQVEsTUFBTSxRQUFRLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFDLE1BQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQztBQUU1RCxJQUFJLGFBQWEsR0FBRyxDQUFDLENBQUM7QUFVdEIsTUFBTSxPQUFPLHdCQUF3QjtBQUFHLElBbUZ0QztBQUNGLFFBakZFLFlBQU8sR0FBNEIsNkJBQTZCLENBQUM7QUFDbkUsUUFFRSxnQkFBVyxHQUFXLFdBQVcsQ0FBQztBQUNwQyxRQUVFLGVBQVUsR0FBVyxJQUFJLENBQUM7QUFDNUIsUUFLRSxhQUFRLEdBQW9CLElBQUksQ0FBQztBQUNuQyxRQUVFLFdBQU0sR0FBb0IsSUFBSSxDQUFDO0FBQ2pDLFFBRUUsb0JBQWUsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFD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Ozs7Ozs7b0JBQUU7QUFBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBIb3N0TGlzdGVuZXIsIE9uSW5pdCwgVmlld0VuY2Fwc3VsYXRpb24gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZvcm1Hcm91cCwgRm9ybUNvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5cbmltcG9ydCB7IGRlZmF1bHREYXRlRm9ybWF0LCBkZWZhdWx0RGF0ZVJhbmdlUGlja2VyT3B0aW9ucyB9IGZyb20gJy4uLy4uL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBJRGF0ZVJhbmdlLCBJRGF0ZVJhbmdlUGlja2VyT3B0aW9ucywgSURlZmluZWREYXRlUmFuZ2UsIElDaGFuZ2VkRGF0YSB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMnO1xuXG5pbXBvcnQgKiBhcyBtb21lbnROcyBmcm9tICdtb21lbnQnOyBjb25zdCBtb21lbnQgPSBtb21lbnROcztcblxubGV0IGluc3RhbmNlQ291bnQgPSAwO1xuXG5AQ29tcG9uZW50KHtcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uRW11bGF0ZWQsXG4gIHNlbGVjdG9yOiAnZGF0ZS1yYW5nZS1waWNrZXInLFxuICBzdHlsZVVybHM6IFtcbiAgICAnLi9kYXRlLXJhbmdlLXBpY2tlci5jb21wb25lbnQuc2NzcycsXG4gIF0sXG4gIHRlbXBsYXRlVXJsOiAnLi9kYXRlLXJhbmdlLXBpY2tlci5jb21wb25lbnQuaHRtbCcsXG59KVxuZXhwb3J0IGNsYXNzIERhdGVSYW5nZVBpY2tlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cbiAgQElucHV0KClcbiAgb3B0aW9uczogSURhdGVSYW5nZVBpY2tlck9wdGlvbnMgPSBkZWZhdWx0RGF0ZVJhbmdlUGlja2VyT3B0aW9ucztcblxuICBASW5wdXQoKVxuICBjb250cm9sTmFtZTogc3RyaW5nID0gJ2RhdGVSYW5nZSc7XG5cbiAgQElucHV0KClcbiAgaW5zdGFuY2VJZDogc3RyaW5nID0gbnVsbDtcblxuICBASW5wdXQoKVxuICBwYXJlbnRGb3JtR3JvdXA6IEZvcm1Hcm91cDtcblxuICBASW5wdXQoKVxuICBmcm9tRGF0ZTogbW9tZW50TnMuTW9tZW50ID0gbnVsbDtcblxuICBASW5wdXQoKVxuICB0b0RhdGU6IG1vbWVudE5zLk1vbWVudCA9IG51bGw7XG5cbiAgQE91dHB1dCgpXG4gIGRhdGVwaWNrZXJSZXNldCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIEBPdXRwdXQoKVxuICByYW5nZVNlbGVjdGVkID0gbmV3IEV2ZW50RW1pdHRlcjxJRGF0ZVJhbmdlPigpO1xuXG4gIGRlZmF1bHRSYW5nZXM6IElEZWZpbmVkRGF0ZVJhbmdlW107XG4gIGlzTW9iaWxlID0gZmFsc2U7XG4gIGZyb21Nb250aDogbnVtYmVyO1xuICBmcm9tWWVhcjogbnVtYmVyO1xuICB0b01vbnRoOiBudW1iZXI7XG4gIHRvWWVhcjogbnVtYmVyO1xuICByYW5nZSA9ICcnO1xuICBzaG93Q2FsZW5kYXJzID0gZmFsc2U7XG4gIGRpc3BsYXlTdHlsZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGdldCBlbmFibGVBcHBseUJ1dHRvbigpOiBib29sZWFuIHtcbiAgICBsZXQgZW5hYmxlZCA9ICF0aGlzLm9wdGlvbnMuYXV0b0FwcGx5ICYmIHRoaXMuZnJvbURhdGUgIT09IG51bGw7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnNpbmdsZUNhbGVuZGFyKSB7XG4gICAgICByZXR1cm4gZW5hYmxlZDtcbiAgICB9XG5cbiAgICByZXR1cm4gZW5hYmxlZCAmJiB0aGlzLnRvRGF0ZSAhPT0gbnVsbDtcbiAgfVxuXG4gIEBIb3N0TGlzdGVuZXIoJ2RvY3VtZW50OmNsaWNrJywgWyckZXZlbnQnXSlcbiAgaGFuZGxlQ2xpY2soZXZlbnQ6IEV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICAvLyBjbG9zZSB0aGUgRGF0ZVBpY2tlciBpZiBjbGlja2luZyBvdXRzaWRlIGlzIG5vdCBhbGxvd2VkXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuY2xpY2tPdXRzaWRlQWxsb3dlZCkge1xuICAgICAgbGV0IHRhcmdldFBhdGhDbGFzc05hbWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICB0cnkge1xuICAgICAgICB0YXJnZXRQYXRoQ2xhc3NOYW1lcyA9IGV2ZW50LmNvbXBvc2VkUGF0aCgpLm1hcCgob2JqOiBFdmVudFRhcmdldCkgPT4gb2JqWydjbGFzc05hbWUnXSkgfHwgWycnXTtcbiAgICAgIH1cbiAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBJRSAvIEVkZ2VcbiAgICAgICAgdGFyZ2V0UGF0aENsYXNzTmFtZXMgPSBldmVudFsncGF0aCddPy5tYXAob2JqID0+IG9iai5jbGFzc05hbWUpO1xuICAgICAgfVxuXG4gICAgICBsZXQgY29udGFpbmVyRWxlbWVudENsYXNzUm9vdCA9IHRoaXMub3B0aW9ucy5tb2RhbCA9PT0gdHJ1ZSA/ICdkYXRlUmFuZ2VQaWNrZXJNb2RhbCcgOiAnZGF0ZVJhbmdlUGlja2VyJztcblxuICAgICAgY29uc3QgdGFyZ2V0RXhpc3RzSW5QYXRoID0gdGFyZ2V0UGF0aENsYXNzTmFtZXM/LnNvbWUoY2xhc3NOYW1lID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGFzc05hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcmV0dXJuIGNsYXNzTmFtZSAmJiBjbGFzc05hbWUuaW5jbHVkZXMoY29udGFpbmVyRWxlbWVudENsYXNzUm9vdCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KTtcblxuICAgICAgaWYgKCF0YXJnZXRFeGlzdHNJblBhdGgpIHtcbiAgICAgICAgdGhpcy50b2dnbGVDYWxlbmRhclZpc2liaWxpdHkoZmFsc2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENsb3NlIHRoZSBEYXRlUGlja2VyIGlmIHRoZSB0YXJnZXQgaW5wdXQgd2FzIGNsaWNrZWRcbiAgICBpZiAodGFyZ2V0LmlkID09PSB0aGlzLmluc3RhbmNlSWQpIHtcbiAgICAgIHRoaXMudG9nZ2xlQ2FsZW5kYXJWaXNpYmlsaXR5KCF0aGlzLnNob3dDYWxlbmRhcnMpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGlmICghdGhpcy5pbnN0YW5jZUlkKSB7XG4gICAgICAvLyBhc3NpZ24gYXV0by1pZFxuICAgICAgdGhpcy5pbnN0YW5jZUlkID0gYGRhdGVSYW5nZVBpY2tlci0keyBpbnN0YW5jZUNvdW50KysgfWA7XG4gICAgfVxuICB9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgaWYgKG5hdmlnYXRvcikge1xuICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSlcbiAgICAgICAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvd2ViT1MvaSlcbiAgICAgICAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBob25lL2kpXG4gICAgICAgIHx8IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2lQb2QvaSlcbiAgICAgICAgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQmxhY2tCZXJyeS9pKVxuICAgICAgICB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9XaW5kb3dzIFBob25lL2kpKSB7XG4gICAgICAgIHRoaXMuaXNNb2JpbGUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGVuc3VyZSBkYXRlcyBpbiBvcHRpb25zIGFyZSB2YWxpZFxuICAgIHRoaXMudmFsaWRhdGVPcHRpb25EYXRlcygpO1xuXG4gICAgLy8gZW5zdXJlIGlucHV0IGRhdGVzIGFyZSB3aXRoaW4gdGhlIG1pbi9tYXggZGF0ZXMgaW4gb3B0aW9uc1xuICAgIHRoaXMudmFsaWRhdGVJbnB1dERhdGVzKCk7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnByZURlZmluZWRSYW5nZXMgJiYgdGhpcy5vcHRpb25zLnByZURlZmluZWRSYW5nZXMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5kZWZhdWx0UmFuZ2VzID0gdGhpcy52YWxpZGF0ZUFuZEFzc2lnblByZWRlZmluZWRSYW5nZXModGhpcy5vcHRpb25zLnByZURlZmluZWRSYW5nZXMpO1xuICAgIH1cblxuICAgIC8vIGFzc2lnbiB2YWx1ZXMgbm90IHByZXNlbnQgaW4gb3B0aW9ucyB3aXRoIGRlZmF1bHQgdmFsdWVzXG4gICAgY29uc3Qgb3B0aW9uc0tleXMgPSBPYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMpO1xuICAgIGNvbnN0IGRlZmF1bHRWYWx1ZXNLZXlzID0gT2JqZWN0LmtleXMoZGVmYXVsdERhdGVSYW5nZVBpY2tlck9wdGlvbnMpO1xuXG4gICAgZGVmYXVsdFZhbHVlc0tleXMuZm9yRWFjaCgoa2V5OiBzdHJpbmcpID0+IHtcbiAgICAgIGlmICghb3B0aW9uc0tleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICB0aGlzLm9wdGlvbnNba2V5XSA9IGRlZmF1bHREYXRlUmFuZ2VQaWNrZXJPcHRpb25zW2tleV07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyB1cGRhdGUgY2FsZW5kYXIgZ3JpZFxuICAgIHRoaXMudXBkYXRlQ2FsZW5kYXIoKTtcblxuICAgIC8vIGNyZWF0ZSBwYXJlbnQgZm9ybSBncm91cCBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgaWYgKCF0aGlzLnBhcmVudEZvcm1Hcm91cCkge1xuICAgICAgdGhpcy5wYXJlbnRGb3JtR3JvdXAgPSBuZXcgRm9ybUdyb3VwKHt9KTtcbiAgICB9XG5cbiAgICAvLyBhZGQgZm9ybSBjb250cm9sIHRvIHBhcmVudCBmb3JtIGdyb3VwXG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLmZvcm1hdFJhbmdlQXNTdHJpbmcoKTtcbiAgICBjb25zdCBjb250cm9sID0gbmV3IEZvcm1Db250cm9sKHsgdmFsdWUsIGRpc2FibGVkOiB0aGlzLm9wdGlvbnMuZGlzYWJsZUlucHV0RGlzcGxheSB9LCB0aGlzLm9wdGlvbnMudmFsaWRhdG9ycyk7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmRpc2FibGVkKSB7XG4gICAgICBjb250cm9sLmRpc2FibGUoKTtcbiAgICB9XG5cbiAgICB0aGlzLnBhcmVudEZvcm1Hcm91cC5hZGRDb250cm9sKHRoaXMuY29udHJvbE5hbWUsIGNvbnRyb2wpO1xuXG4gICAgLy8gc2V0IHZhbHVlIG9mIGNvbnRyb2xcbiAgICB0aGlzLnNldFJhbmdlKCk7XG4gIH1cblxuICB2YWxpZGF0ZUlucHV0RGF0ZXMoKTogdm9pZCB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmZyb21EYXRlID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5mcm9tRGF0ZSA9IG1vbWVudCh0aGlzLmZyb21EYXRlKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRoaXMudG9EYXRlID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy50b0RhdGUgPSBtb21lbnQodGhpcy50b0RhdGUpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmZyb21EYXRlICYmIHRoaXMub3B0aW9ucy5taW5EYXRlICYmIHRoaXMuZnJvbURhdGUuaXNCZWZvcmUodGhpcy5vcHRpb25zLm1pbkRhdGUsICdkYXRlJykpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdASW5wdXQgZnJvbURhdGUgaXMgYmVmb3JlIHRoZSBzcGVjaWZpZWQgbWluRGF0ZSBpbiBvcHRpb25zJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudG9EYXRlICYmIHRoaXMub3B0aW9ucy5tYXhEYXRlICYmIHRoaXMudG9EYXRlLmlzQWZ0ZXIodGhpcy5vcHRpb25zLm1heERhdGUsICdkYXRlJykpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdASW5wdXQgdG9EYXRlIGlzIGFmdGVyIHRoZSBzcGVjaWZpZWQgbWF4RGF0ZSBpbiBvcHRpb25zJyk7XG4gICAgfVxuICB9XG5cbiAgdmFsaWRhdGVPcHRpb25EYXRlcygpOiB2b2lkIHtcbiAgICAvLyB2YWxpZGF0ZSBtYXhEYXRlIGlzbid0IGJlZm9yZSBtaW5EYXRlIG9yIHZpY2UgdmVyc2FcbiAgICBpZiAodGhpcy5vcHRpb25zKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm1pbkRhdGUgJiYgdGhpcy5vcHRpb25zLm1heERhdGUpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5taW5EYXRlLmlzQWZ0ZXIodGhpcy5vcHRpb25zLm1heERhdGUsICdkYXRlJykpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignbWluRGF0ZSBzcGVjaWZpZWQgaW4gb3B0aW9ucyBpcyBhZnRlciB0aGUgbWF4RGF0ZScpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMub3B0aW9ucy5tYXhEYXRlLmlzQmVmb3JlKHRoaXMub3B0aW9ucy5taW5EYXRlLCAnZGF0ZScpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ21heERhdGUgc3BlY2lmaWVkIGluIG9wdGlvbnMgaXMgYmVmb3JlIHRoZSBtaW5EYXRlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBhc3Npc3RzIENTUyB0byBmaXggc21hbGwgcG9zaXRpb25pbmcgYnVnIHdpdGggRnJvbTovVG86IGRhdGUgdGV4dFxuICBjaGVja0Nocm9tZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB3aW5kb3dbJ2Nocm9tZSddID8gJ2lzLWNocm9tZScgOiAnJztcbiAgfVxuXG4gIHRvZ2dsZUNhbGVuZGFyVmlzaWJpbGl0eSh2YWx1ZT86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZih0aGlzLm9wdGlvbnMubW9kYWwgPT09IHRydWUpIHtcbiAgICAgIHRoaXMuZGlzcGxheVN0eWxlID0gdmFsdWUgIT09IG51bGwgPyB2YWx1ZSA9PT0gZmFsc2UgPyBmYWxzZSA6IHRydWUgOiB0aGlzLnNob3dDYWxlbmRhcnMgPT09IGZhbHNlID8gZmFsc2UgOiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuc2hvd0NhbGVuZGFycyA9IHZhbHVlICE9PSBudWxsID8gdmFsdWUgOiAhdGhpcy5zaG93Q2FsZW5kYXJzO1xuICAgIH1cbiAgfTFcblxuICBzZXRGcm9tVG9Nb250aFllYXIoZnJvbURhdGU/OiBtb21lbnROcy5Nb21lbnQsIHRvRGF0ZT86IG1vbWVudE5zLk1vbWVudCk6IHZvaWQge1xuICAgIGxldCB0ZW1wRnJvbURhdGUgPSBmcm9tRGF0ZSB8fCB0aGlzLmZyb21EYXRlIHx8IG1vbWVudCgpO1xuICAgIGxldCB0ZW1wVG9EYXRlID0gdG9EYXRlIHx8IHRoaXMudG9EYXRlIHx8IG1vbWVudCgpO1xuXG4gICAgaWYgKCEodGVtcEZyb21EYXRlIGluc3RhbmNlb2YgbW9tZW50KSkge1xuICAgICAgdGVtcEZyb21EYXRlID0gbW9tZW50KHRlbXBGcm9tRGF0ZSwgZGVmYXVsdERhdGVGb3JtYXQpO1xuICAgIH1cblxuICAgIGlmICghKHRlbXBUb0RhdGUgaW5zdGFuY2VvZiBtb21lbnQpKSB7XG4gICAgICB0ZW1wVG9EYXRlID0gbW9tZW50KHRlbXBUb0RhdGUsIGRlZmF1bHREYXRlRm9ybWF0KTtcbiAgICB9XG5cbiAgICB0aGlzLmZyb21Nb250aCA9IHRlbXBGcm9tRGF0ZS5nZXQoJ21vbnRoJyk7XG4gICAgdGhpcy5mcm9tWWVhciA9IHRlbXBGcm9tRGF0ZS5nZXQoJ3llYXInKTtcblxuICAgIHRoaXMudG9Nb250aCA9IHRlbXBUb0RhdGUuZ2V0KCdtb250aCcpO1xuICAgIHRoaXMudG9ZZWFyID0gdGVtcFRvRGF0ZS5nZXQoJ3llYXInKTtcbiAgfVxuXG4gIHVwZGF0ZUNhbGVuZGFyKCk6IHZvaWQge1xuICAgIC8vIGdldCBtb250aCBhbmQgeWVhciB0byBzaG93IGNhbGVuZGFyXG4gICAgdGhpcy5zZXRGcm9tVG9Nb250aFllYXIoKTtcbiAgICB0aGlzLnNldFJhbmdlKCk7XG4gIH1cblxuICAvLyB1cGRhdGUgZnJvbS90byBiYXNlZCBvbiBzZWxlY3Rpb25cbiAgZGF0ZUNoYW5nZWQoY2hhbmdlZERhdGE6IElDaGFuZ2VkRGF0YSk6IHZvaWQge1xuICAgIGNvbnN0IHZhbHVlID0gY2hhbmdlZERhdGEuZGF5O1xuICAgIGNvbnN0IGlzTGVmdCA9IGNoYW5nZWREYXRhLmlzTGVmdDtcblxuICAgIGlmIChpc0xlZnQpIHtcbiAgICAgIHRoaXMuZnJvbURhdGUgPSB2YWx1ZTtcblxuICAgICAgaWYgKHRoaXMuZnJvbURhdGUuaXNBZnRlcih0aGlzLnRvRGF0ZSwgJ2RhdGUnKSkge1xuICAgICAgICB0aGlzLnRvRGF0ZSA9IHRoaXMuZnJvbURhdGUuY2xvbmUoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLnRvRGF0ZSA9IHZhbHVlO1xuXG4gICAgICBpZiAodGhpcy50b0RhdGUuaXNCZWZvcmUodGhpcy5mcm9tRGF0ZSwgJ2RhdGUnKSkge1xuICAgICAgICB0aGlzLmZyb21EYXRlID0gdGhpcy50b0RhdGUuY2xvbmUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNldEZyb21Ub01vbnRoWWVhcih0aGlzLmZyb21EYXRlLCB0aGlzLnRvRGF0ZSk7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmF1dG9BcHBseSAmJiAodGhpcy50b0RhdGUgfHwgdGhpcy5vcHRpb25zLnNpbmdsZUNhbGVuZGFyKSkge1xuICAgICAgdGhpcy50b2dnbGVDYWxlbmRhclZpc2liaWxpdHkoZmFsc2UpO1xuICAgICAgdGhpcy5zZXRSYW5nZSgpO1xuICAgICAgdGhpcy5lbWl0UmFuZ2VTZWxlY3RlZCgpO1xuICAgIH1cbiAgfVxuXG4gIGVtaXRSYW5nZVNlbGVjdGVkKGRhdGE/OiBJRGF0ZVJhbmdlKTogdm9pZCB7XG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICBkYXRhID0gdGhpcy5vcHRpb25zLnNpbmdsZUNhbGVuZGFyID8geyBzdGFydDogdGhpcy5mcm9tRGF0ZSB9IDogeyBzdGFydDogdGhpcy5mcm9tRGF0ZSwgZW5kOiB0aGlzLnRvRGF0ZSB9O1xuICAgIH1cblxuICAgIHRoaXMucmFuZ2VTZWxlY3RlZC5lbWl0KGRhdGEpO1xuICB9XG5cbiAgZ2V0TW9tZW50KHZhbHVlKTogbW9tZW50TnMuTW9tZW50IHtcbiAgICByZXR1cm4gbW9tZW50KHZhbHVlLCB0aGlzLm9wdGlvbnMuZm9ybWF0KTtcbiAgfVxuXG4gIGZvcm1hdFJhbmdlQXNTdHJpbmcoKTogc3RyaW5nIHtcbiAgICBsZXQgcmFuZ2UgPSAnJztcblxuICAgIGlmICh0aGlzLm9wdGlvbnMuc2luZ2xlQ2FsZW5kYXIgJiYgdGhpcy5mcm9tRGF0ZSkge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLmZyb21EYXRlID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLmZyb21EYXRlID0gbW9tZW50KHRoaXMuZnJvbURhdGUpO1xuICAgICAgfVxuXG4gICAgICByYW5nZSA9IHRoaXMuZnJvbURhdGUuZm9ybWF0KHRoaXMub3B0aW9ucy5mb3JtYXQpO1xuICAgIH1cbiAgICBlbHNlIGlmICghdGhpcy5vcHRpb25zLnNpbmdsZUNhbGVuZGFyICYmIHRoaXMuZnJvbURhdGUgJiYgdGhpcy50b0RhdGUpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5mcm9tRGF0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhpcy5mcm9tRGF0ZSA9IG1vbWVudCh0aGlzLmZyb21EYXRlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLnRvRGF0ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhpcy50b0RhdGUgPSBtb21lbnQodGhpcy50b0RhdGUpO1xuICAgICAgfVxuXG4gICAgICByYW5nZSA9IGAkeyB0aGlzLmZyb21EYXRlLmZvcm1hdCh0aGlzLm9wdGlvbnMuZm9ybWF0KSB9IC0gJHsgdGhpcy50b0RhdGUuZm9ybWF0KHRoaXMub3B0aW9ucy5mb3JtYXQpIH1gO1xuICAgIH1cblxuICAgIHJldHVybiByYW5nZTtcbiAgfVxuXG4gIHNldFJhbmdlKCk6IHZvaWQge1xuICAgIHRoaXMucmFuZ2UgPSB0aGlzLmZvcm1hdFJhbmdlQXNTdHJpbmcoKTtcblxuICAgIGlmICh0aGlzLnBhcmVudEZvcm1Hcm91cCkge1xuICAgICAgY29uc3QgY29udHJvbCA9IHRoaXMucGFyZW50Rm9ybUdyb3VwPy5nZXQodGhpcy5jb250cm9sTmFtZSk7XG5cbiAgICAgIGlmIChjb250cm9sKSB7XG4gICAgICAgIGNvbnRyb2wuc2V0VmFsdWUodGhpcy5yYW5nZSk7XG4gICAgICAgIGNvbnRyb2wudXBkYXRlVmFsdWVBbmRWYWxpZGl0eSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNldERhdGVGcm9tSW5wdXQoZXZlbnQ6IHtldmVudDogRXZlbnQsIGlzTGVmdDogYm9vbGVhbn0pOiB2b2lkIHtcbiAgICBjb25zdCBpc0xlZnQgPSBldmVudC5pc0xlZnQ7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKHRhcmdldC52YWx1ZSkge1xuICAgICAgICBjb25zdCBkYXkgPSB0aGlzLmdldE1vbWVudCh0YXJnZXQudmFsdWUpO1xuXG4gICAgICAgIGlmICghZGF5LmlzQmVmb3JlKHRoaXMub3B0aW9ucy5taW5EYXRlKSAmJiAhZGF5LmlzQWZ0ZXIodGhpcy5vcHRpb25zLm1heERhdGUpKSB7XG4gICAgICAgICAgaWYgKGlzTGVmdCAmJiAhdGhpcy5mcm9tRGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5mcm9tRGF0ZSA9IGRheTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWlzTGVmdCAmJiAhdGhpcy50b0RhdGUpIHtcbiAgICAgICAgICAgIHRoaXMudG9EYXRlID0gZGF5O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuZGF0ZUNoYW5nZWQoe1xuICAgICAgICAgICAgZGF5LFxuICAgICAgICAgICAgaXNMZWZ0LFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKHRoaXMuZnJvbURhdGUgJiYgdGhpcy50b0RhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0RnJvbVRvTW9udGhZZWFyKHRoaXMuZnJvbURhdGUsIHRoaXMudG9EYXRlKTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuYXV0b0FwcGx5KSB7XG4gICAgICAgICAgICAgIHRoaXMuZW1pdFJhbmdlU2VsZWN0ZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgLy8gYXNzdW1lIG5vdGhpbmcgLSByZXNldCB2YWx1ZXNcbiAgICAgICAgICB0aGlzLmZyb21EYXRlID0gbnVsbDtcbiAgICAgICAgICB0aGlzLnRvRGF0ZSA9IG51bGw7XG4gICAgICAgICAgdGFyZ2V0LnZhbHVlID0gJyc7XG4gICAgICAgICAgdGFyZ2V0LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgfVxuICB9XG5cbiAgbW9udGhDaGFuZ2VkKGRhdGE6IElDaGFuZ2VkRGF0YSk6IHZvaWQge1xuICAgIGxldCB0ZW1wO1xuXG4gICAgaWYgKGRhdGEuaXNMZWZ0KSB7XG4gICAgICB0ZW1wID0gbW9tZW50KFt0aGlzLmZyb21ZZWFyLCB0aGlzLmZyb21Nb250aF0pLmFkZChkYXRhLnZhbHVlLCAnbW9udGgnKTtcbiAgICAgIHRoaXMuZnJvbU1vbnRoID0gdGVtcD8uZ2V0KCdtb250aCcpO1xuICAgICAgdGhpcy5mcm9tWWVhciA9IHRlbXA/LmdldCgneWVhcicpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRlbXAgPSBtb21lbnQoW3RoaXMudG9ZZWFyLCB0aGlzLnRvTW9udGhdKS5hZGQoZGF0YS52YWx1ZSwgJ21vbnRoJyk7XG4gICAgICB0aGlzLnRvTW9udGggPSB0ZW1wPy5nZXQoJ21vbnRoJyk7XG4gICAgICB0aGlzLnRvWWVhciA9IHRlbXA/LmdldCgneWVhcicpO1xuICAgIH1cbiAgfVxuXG4gIHllYXJDaGFuZ2VkKGRhdGE6IElDaGFuZ2VkRGF0YSk6IHZvaWQge1xuICAgIGxldCB0ZW1wO1xuXG4gICAgaWYgKGRhdGEuaXNMZWZ0KSB7XG4gICAgICB0ZW1wID0gbW9tZW50KFt0aGlzLmZyb21ZZWFyLCB0aGlzLmZyb21Nb250aF0pLmFkZChkYXRhLnZhbHVlLCAneWVhcicpO1xuICAgICAgdGhpcy5mcm9tTW9udGggPSB0ZW1wPy5nZXQoJ21vbnRoJyk7XG4gICAgICB0aGlzLmZyb21ZZWFyID0gdGVtcD8uZ2V0KCd5ZWFyJyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGVtcCA9IG1vbWVudChbdGhpcy50b1llYXIsIHRoaXMudG9Nb250aF0pLmFkZChkYXRhLnZhbHVlLCAneWVhcicpO1xuICAgICAgdGhpcy50b01vbnRoID0gdGVtcD8uZ2V0KCdtb250aCcpO1xuICAgICAgdGhpcy50b1llYXIgPSB0ZW1wPy5nZXQoJ3llYXInKTtcbiAgICB9XG4gIH1cblxuICBjbG9zZShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLnRvZ2dsZUNhbGVuZGFyVmlzaWJpbGl0eShmYWxzZSk7XG5cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfVxuXG4gIHJlc2V0KGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIHRoaXMuZnJvbURhdGUgPSBudWxsO1xuICAgIHRoaXMudG9EYXRlID0gbnVsbDtcbiAgICB0aGlzLnNldFJhbmdlKCk7XG4gICAgdGhpcy5kYXRlcGlja2VyUmVzZXQuZW1pdCgpO1xuXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cblxuICBhcHBseShldmVudDogRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLnRvZ2dsZUNhbGVuZGFyVmlzaWJpbGl0eShmYWxzZSk7XG4gICAgdGhpcy5zZXRSYW5nZSgpO1xuICAgIHRoaXMuZW1pdFJhbmdlU2VsZWN0ZWQoKTtcblxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICB9XG5cbiAgYXBwbHlQcmVkZWZpbmVkUmFuZ2UoZXZlbnQ6IHtldmVudDogRXZlbnQsIGRlZmluZWREYXRlUmFuZ2U6IElEZWZpbmVkRGF0ZVJhbmdlfSk6IHZvaWQge1xuICAgIC8vIGFkanVzdCB0by9mcm9tIG1vbnRoL3llYXIgc28gY2FsZW5kYXIgbW9udGhzIGFuZCB5ZWFycyBtYXRjaCByYW5nZVxuICAgIHRoaXMuc2V0RnJvbVRvTW9udGhZZWFyKGV2ZW50LmRlZmluZWREYXRlUmFuZ2UudmFsdWUuc3RhcnQsIGV2ZW50LmRlZmluZWREYXRlUmFuZ2UudmFsdWUuZW5kKTtcblxuICAgIHRoaXMuZnJvbURhdGUgPSBldmVudC5kZWZpbmVkRGF0ZVJhbmdlLnZhbHVlLnN0YXJ0O1xuICAgIHRoaXMudG9EYXRlID0gZXZlbnQuZGVmaW5lZERhdGVSYW5nZS52YWx1ZS5lbmQ7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmF1dG9BcHBseSkge1xuICAgICAgdGhpcy5hcHBseShldmVudC5ldmVudCk7XG4gICAgfVxuICB9XG5cbiAgdmFsaWRhdGVBbmRBc3NpZ25QcmVkZWZpbmVkUmFuZ2VzKHJhbmdlczogSURlZmluZWREYXRlUmFuZ2VbXSk6IElEZWZpbmVkRGF0ZVJhbmdlW10ge1xuICAgIHJldHVybiByYW5nZXMuZmlsdGVyKHJhbmdlID0+IHtcbiAgICAgIGlmIChyYW5nZS52YWx1ZS5zdGFydC5pc0FmdGVyKHJhbmdlLnZhbHVlLmVuZCwgJ2RhdGUnKSkge1xuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgUHJlLWRlZmluZWQgcmFuZ2UgXCIkeyByYW5nZS5uYW1lIH1cIiBzdGFydCBkYXRlIGNhbm5vdCBiZSBhZnRlciB0aGUgZW5kIGRhdGUgZm9yIHRoZSByYW5nZS5gKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5taW5EYXRlICYmIHJhbmdlLnZhbHVlLnN0YXJ0LmlzQmVmb3JlKHRoaXMub3B0aW9ucy5taW5EYXRlKSkge1xuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgUHJlLWRlZmluZWQgcmFuZ2UgXCIkeyByYW5nZS5uYW1lIH1cIiBzdGFydCBkYXRlIGlzIGJlZm9yZSB0aGUgc3BlY2lmaWVkIG1pbkRhdGUgaW4geW91ciBvcHRpb25zLmApO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLm1heERhdGUgJiYgcmFuZ2UudmFsdWUuZW5kLmlzQWZ0ZXIodGhpcy5vcHRpb25zLm1heERhdGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBQcmUtZGVmaW5lZCByYW5nZSBcIiR7IHJhbmdlLm5hbWUgfVwiIGVuZCBkYXRlIGlzIGFmdGVyIHRoZSBzcGVjaWZpZWQgbWF4RGF0ZSBpbiB5b3VyIG9wdGlvbnMuYCk7XG4gICAgICB9XG5cbiAgICAgIC8vIGFkZCByYW5nZSB0byByYW5nZXNcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICB9XG59XG4iXX0=